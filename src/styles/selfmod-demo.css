/* ============================================
   Self-mod demo overrides for onboarding
   Applied via data-selfmod-demo on .window-shell
   ============================================ */

/* ‚ïê‚ïê‚ïê LOW: Small tweak ‚ïê‚ïê‚ïê */
/* Subtle sidebar accent + greeting banner */

.window-shell[data-selfmod-demo="low"] .sidebar {
  border-right-color: color-mix(in oklch, var(--foreground) 12%, transparent);
}

.window-shell[data-selfmod-demo="low"] .sidebar-brand-text {
  letter-spacing: 0.25em;
  opacity: 0.8;
}

.window-shell[data-selfmod-demo="low"] .sidebar-nav-item {
  border-radius: 12px;
  padding: 10px 14px;
}

.window-shell[data-selfmod-demo="low"] .composer-form {
  border: 1px solid color-mix(in oklch, var(--foreground) 10%, transparent);
}

/* ‚ïê‚ïê‚ïê MEDIUM: New feature ‚ïê‚ïê‚ïê */
/* Wider sidebar with larger icons + different composer shape */

.window-shell[data-selfmod-demo="medium"] .sidebar {
  width: 260px;
  background: color-mix(in oklch, var(--background) 95%, var(--foreground));
  border-right: none;
  box-shadow: 2px 0 20px color-mix(in oklch, var(--foreground) 5%, transparent);
}

.window-shell[data-selfmod-demo="medium"] .window-shell.full .title-bar {
  left: 260px;
}

.window-shell[data-selfmod-demo="medium"] .sidebar-brand {
  padding: 0 18px 12px;
}

.window-shell[data-selfmod-demo="medium"] .sidebar-brand-logo {
  width: 80px;
  height: 80px;
}

.window-shell[data-selfmod-demo="medium"] .sidebar-nav {
  gap: 4px;
  padding: 14px 16px;
}

.window-shell[data-selfmod-demo="medium"] .sidebar-nav-item {
  padding: 14px 18px;
  border-radius: 14px;
  font-size: 14px;
  gap: 14px;
}

.window-shell[data-selfmod-demo="medium"] .sidebar-nav-icon {
  width: 22px;
  height: 22px;
}

.window-shell[data-selfmod-demo="medium"] .sidebar-footer {
  border-top: none;
  padding: 16px;
  background: color-mix(in oklch, var(--foreground) 3%, transparent);
  margin: 8px;
  border-radius: 12px;
}

.window-shell[data-selfmod-demo="medium"] .composer-form {
  border-radius: 20px;
  max-width: 44rem;
  border: 1px solid color-mix(in oklch, var(--foreground) 8%, transparent);
  box-shadow: 0 4px 24px color-mix(in oklch, var(--foreground) 6%, transparent);
}

.window-shell[data-selfmod-demo="medium"] .session-messages {
  max-width: 54rem;
}

/* ‚ïê‚ïê‚ïê HIGH: Cat-themed full redesign ‚ïê‚ïê‚ïê */
/* Bottom dock, apps rail, cat cursor, warm palette, paw accents */

/* --- Cat cursor everywhere --- */
.window-shell[data-selfmod-demo="high"],
.window-shell[data-selfmod-demo="high"] * {
  cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='22' height='26'><ellipse cx='11' cy='18' rx='5.5' ry='4.5' fill='%23f97316'/><circle cx='5' cy='9' r='2.8' fill='%23fb923c'/><circle cx='11' cy='6.5' r='2.8' fill='%23fb923c'/><circle cx='17' cy='9' r='2.8' fill='%23fb923c'/></svg>") 11 18, auto !important;
}

/* --- Warm cat palette override --- */
.window-shell[data-selfmod-demo="high"] {
  --cat-warm: #fff7ed;
  --cat-cream: #fef3c7;
  --cat-orange: #f97316;
  --cat-peach: #fdba74;
  --cat-amber: #f59e0b;
  --cat-brown: #92400e;
}

/* --- Background warmth --- */
.window-shell[data-selfmod-demo="high"] .full-body {
  background: linear-gradient(
    160deg,
    color-mix(in oklch, var(--background) 92%, #fde68a) 0%,
    var(--background) 40%,
    color-mix(in oklch, var(--background) 94%, #fed7aa) 100%
  );
}

/* --- Sidebar ‚Üí Bottom dock --- */
.window-shell[data-selfmod-demo="high"] .sidebar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  width: 100% !important;
  height: 56px;
  min-width: 0;
  flex-direction: row;
  align-items: center;
  border-right: none;
  border-top: 1px solid color-mix(in oklch, var(--cat-orange) 20%, transparent);
  border-radius: 16px 16px 0 0;
  background: color-mix(in oklch, var(--background) 90%, var(--cat-cream));
  backdrop-filter: blur(20px);
  box-shadow: 0 -4px 24px color-mix(in oklch, var(--cat-orange) 8%, transparent);
  z-index: 100;
  overflow: hidden;
  padding: 0 16px;
  opacity: 1;
}

.window-shell[data-selfmod-demo="high"] .window-shell.full .title-bar {
  left: 0;
}

/* Hide sidebar header spacer */
.window-shell[data-selfmod-demo="high"] .sidebar-header {
  display: none;
}

/* Brand in dock: just the logo, small */
.window-shell[data-selfmod-demo="high"] .sidebar-brand {
  padding: 0;
  flex-shrink: 0;
}

.window-shell[data-selfmod-demo="high"] .sidebar-brand-logo {
  width: 36px;
  height: 36px;
}

.window-shell[data-selfmod-demo="high"] .sidebar-brand-text {
  display: none;
}

/* Nav ‚Üí horizontal */
.window-shell[data-selfmod-demo="high"] .sidebar-nav {
  flex-direction: row;
  gap: 2px;
  padding: 4px 8px;
  flex: 1;
  justify-content: center;
}

.window-shell[data-selfmod-demo="high"] .sidebar-nav-item {
  padding: 8px 14px;
  border-radius: 10px;
  gap: 6px;
  font-size: 12px;
  width: auto;
}

.window-shell[data-selfmod-demo="high"] .sidebar-nav-item:hover {
  background: color-mix(in oklch, var(--cat-orange) 12%, transparent);
}

.window-shell[data-selfmod-demo="high"] .sidebar-nav-icon {
  width: 18px;
  height: 18px;
}

/* Footer inline in dock */
.window-shell[data-selfmod-demo="high"] .sidebar-footer {
  flex-direction: row;
  border-top: none;
  padding: 4px 0;
  gap: 4px;
  flex-shrink: 0;
}

/* --- Fake apps rail on the left via ::before --- */
.window-shell[data-selfmod-demo="high"] .full-body-main::before {
  content: "üê±\aüì∑\aüéµ\aüéÆ\aüìÅ\a‚öôÔ∏è";
  white-space: pre;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  gap: 0;
  padding: 52px 0 16px;
  width: 52px;
  min-width: 52px;
  flex-shrink: 0;
  font-size: 20px;
  line-height: 2.2;
  border-right: 1px solid color-mix(in oklch, var(--cat-orange) 10%, transparent);
  background: color-mix(in oklch, var(--background) 96%, var(--cat-cream));
  user-select: none;
  pointer-events: none;
}

/* full-body-main needs to be flex row to accommodate the apps rail */
.window-shell[data-selfmod-demo="high"] .full-body-main {
  display: flex;
  flex-direction: row;
  padding-bottom: 56px; /* space for bottom dock */
}

/* session-content needs to stay filling remaining space */
.window-shell[data-selfmod-demo="high"] .session-content {
  flex: 1;
  min-width: 0;
}

/* --- Messages --- */
.window-shell[data-selfmod-demo="high"] .session-messages {
  max-width: 52rem;
  padding-top: 32px;
}

.window-shell[data-selfmod-demo="high"] .event-item {
  border-radius: 16px;
  border: 1px solid color-mix(in oklch, var(--cat-orange) 10%, transparent);
}

.window-shell[data-selfmod-demo="high"] .event-item.user {
  background: color-mix(in oklch, var(--cat-orange) 10%, transparent);
  border-color: color-mix(in oklch, var(--cat-orange) 15%, transparent);
  border-bottom-right-radius: 4px;
}

.window-shell[data-selfmod-demo="high"] .event-item.assistant {
  background: color-mix(in oklch, var(--cat-cream) 20%, transparent);
  border-color: color-mix(in oklch, var(--cat-orange) 8%, transparent);
  border-bottom-left-radius: 4px;
}

/* --- New session paw accent via ::after --- */
.window-shell[data-selfmod-demo="high"] .new-session-view::after {
  content: "üêæ";
  position: absolute;
  bottom: 140px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 32px;
  opacity: 0.25;
  pointer-events: none;
}

/* --- Composer --- */
.window-shell[data-selfmod-demo="high"] .composer {
  bottom: 72px; /* above the bottom dock */
}

.window-shell[data-selfmod-demo="high"] .composer-form {
  max-width: 46rem;
  border-radius: 18px;
  background: color-mix(in oklch, var(--background) 88%, var(--cat-cream));
  border: 1px solid color-mix(in oklch, var(--cat-orange) 15%, transparent);
  box-shadow:
    0 0 0 1px color-mix(in oklch, var(--cat-orange) 6%, transparent),
    0 6px 32px color-mix(in oklch, var(--cat-orange) 10%, transparent);
  backdrop-filter: blur(20px);
}

.window-shell[data-selfmod-demo="high"] .composer-input {
  font-size: 15px;
}

/* --- Window header --- */
.window-shell[data-selfmod-demo="high"] .window-header {
  border-bottom-color: color-mix(in oklch, var(--cat-orange) 10%, transparent);
}

.window-shell[data-selfmod-demo="high"] .app-badge {
  font-size: 12px;
  letter-spacing: 0.08em;
}

/* --- Turn headers --- */
.window-shell[data-selfmod-demo="high"] .session-turn-title {
  color: var(--cat-orange);
  opacity: 0.7;
}

/* ‚ïê‚ïê‚ïê Fade-through for "high" layout swap ‚ïê‚ïê‚ïê */

.window-shell[data-selfmod-fading] .full-body {
  opacity: 0;
  transition: opacity 0.3s ease !important;
}

.window-shell:not([data-selfmod-fading]) .full-body {
  opacity: 1;
  transition: opacity 0.3s ease;
}

/* ‚ïê‚ïê‚ïê Transition all changes smoothly ‚ïê‚ïê‚ïê */

.window-shell[data-selfmod-demo] .sidebar,
.window-shell[data-selfmod-demo] .sidebar-header,
.window-shell[data-selfmod-demo] .sidebar-brand,
.window-shell[data-selfmod-demo] .sidebar-brand-logo,
.window-shell[data-selfmod-demo] .sidebar-brand-text,
.window-shell[data-selfmod-demo] .sidebar-nav,
.window-shell[data-selfmod-demo] .sidebar-nav-item,
.window-shell[data-selfmod-demo] .sidebar-nav-icon,
.window-shell[data-selfmod-demo] .sidebar-footer,
.window-shell[data-selfmod-demo] .composer-form,
.window-shell[data-selfmod-demo] .composer-input,
.window-shell[data-selfmod-demo] .composer,
.window-shell[data-selfmod-demo] .session-messages,
.window-shell[data-selfmod-demo] .session-content,
.window-shell[data-selfmod-demo] .window-header,
.window-shell[data-selfmod-demo] .full-body,
.window-shell[data-selfmod-demo] .full-body-main,
.window-shell[data-selfmod-demo] .app-badge,
.window-shell[data-selfmod-demo] .event-item,
.window-shell[data-selfmod-demo] .session-turn-title {
  transition: all 0.5s cubic-bezier(0.25, 0.1, 0.25, 1);
}
